(function(){"use strict";var e={6054:function(e,t,i){var s=i(144),n=i(4720),r=i.n(n),o=i(2575),l=i.n(o),a=i(9669),d=i.n(a);let h=null;d().defaults.baseURL="/api/android/device",d().interceptors.request.use((e=>(h=n.Loading.service({fullscreen:!0}),e)),(()=>{h.close(),n.Message.error("网络错误")})),d().interceptors.response.use((e=>(h.close(),null!=e.data&&2e5===e.data.code?e.data.data:n.Message.warning(e.data.message))),(e=>{h.close(),n.Message.error(e)}));var c={devices(){return d().get("/list")},connect(e){return d().post("/connect",{serial:e})},dump(e){return d().post("/dump",{serial:e})},call(e,t,i,s,n){return d().post(`/call/${t}`,{serial:e,selectors:i,args:s,kwargs:n})}},u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app"},[t("resizable-view",{on:{itemresize:e.onPhoneBoxResize}},[t("resizable-item",{ref:"basePhoneBox",attrs:{"min-width":360,"base-width":"40%"}},[t("simple-header",{attrs:{title:"设备"}},[t("el-select",{staticStyle:{"max-width":"150px",padding:"2px 20px 0 0"},attrs:{placeholder:"选择设备",clearable:"",filterable:"",size:"mini"},model:{value:e.serial,callback:function(t){e.serial=t},expression:"serial"}},e._l(e.deviceList,(function(e,i){return t("el-option",{key:i,attrs:{label:e,value:e}})})),1),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onRefreshButtonClick}},[e._v("连接/刷新")])],1),t("resizable-view",{staticClass:"phone-box",attrs:{mode:"none"},on:{itemresize:e.onPhoneResize}},[t("resizable-item",{ref:"phoneBox",attrs:{"base-width":320,"base-height":480,"min-width":320,"min-height":480,"slider-bar":"all","slider-area":"right-bottom"}},[t("phone-view",{ref:"phoneView",on:{elementclick:e.onTreeNodeClick,elementdoubleclick:e.onPhoneElementDoubleClick,keypressed:e.onPhoneKeyPressed}})],1)],1)],1),t("resizable-item",{attrs:{"base-width":"30%","min-width":360}},[t("simple-header",{attrs:{title:"属性"}}),t("el-table",{attrs:{data:Object.keys(e.currentNode),border:"",height:"calc(100% - 50px)"}},[t("el-table-column",{attrs:{label:"key",width:"150"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("strong",[e._v(e._s(i.row.replace("@","")))])]}}])}),t("el-table-column",{attrs:{label:"value","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.currentNode[t.row])+" ")]}}])})],1)],1),t("resizable-item",{attrs:{"base-width":"30%","min-width":100}},[t("simple-header",{attrs:{title:"结构"}}),t("div",{staticStyle:{height:"calc(100% - 50px)",overflow:"auto"}},[t("el-tree",{attrs:{data:e.data,props:e.defaultProps,"default-expanded-keys":e.defaultExpandedKeys},on:{"node-click":e.onTreeNodeClick}})],1)],1)],1)],1)},p=[],f=(i(6699),function(){var e=this,t=e._self._c;return t("div",{staticClass:"simple-header"},[t("div",{staticClass:"simple-header-title"},[t("strong",[e._v(e._s(e.title))])]),t("div",{staticClass:"simple-header-content"},[e._t("default")],2)])}),v=[],m={props:{title:{type:String,default:"Title"}}},w=m,g=i(1001),y=(0,g.Z)(w,f,v,!1,null,null,null),x=y.exports,b=function(){var e=this,t=e._self._c;return t("div",{staticClass:"phone-view"},[t("phone-keys-bar",{on:{pressed:e.onKeyPressed}}),t("phone-nav-bar",{on:{pressed:e.onKeyPressed}}),t("div",{ref:"phoneScreen",staticClass:"phone-screen",style:e.phoneScreenStyle,domProps:{innerHTML:e._s(e.hierarchy.showElements)}})],1)},k=[],$=function(){var e=this,t=e._self._c;return t("div",{staticClass:"phone-keys-bar",style:e.keysBarStyle},[t("phone-key",{staticClass:"el-icon-plus",attrs:{keycode:"volume_up",title:"音量+"},on:{pressed:e.pressed}}),t("phone-key",{staticClass:"el-icon-minus",attrs:{keycode:"volume_down",title:"音量-"},on:{pressed:e.pressed}}),t("phone-key",{staticClass:"el-icon-switch-button",staticStyle:{"margin-top":"30px"},attrs:{keycode:"power",title:"电源键"},on:{pressed:e.pressed}})],1)},P=[],_=function(){var e=this,t=e._self._c;return t("div",{staticClass:"phone-key",style:e.keyStyle,on:{click:e.pressed,dbclick:e.dbPressed}},[e._t("default")],2)},S=[],C={props:{keycode:{type:[Number,String],default:null},keyStyle:{type:Object,default(){return{width:"100%",height:"50px","margin-top":"5px","border-radius":"0 8px 8px 0","line-height":"50px"}}}},methods:{pressed(e){this.$emit("pressed",this.keycode,this,e)},dbPressed(e){this.$emit("db-pressed",this.keycode,this,e)}}},O=C,V=(0,g.Z)(O,_,S,!1,null,null,null),j=V.exports,z={components:{PhoneKey:j},props:{keysBarStyle:{type:Object,default(){return{width:"20px",height:"200px"}}}},methods:{pressed(e){this.$emit("pressed",e)}}},L=z,R=(0,g.Z)(L,$,P,!1,null,null,null),E=R.exports,H=function(){var e=this,t=e._self._c;return t("div",{staticClass:"phone-nav-bar",style:e.navBarStyle},[t("phone-key",{staticClass:"el-icon-arrow-left",staticStyle:{"border-radius":"0","font-size":"24px",margin:"0"},attrs:{title:"返回上级",keycode:"back"},on:{pressed:e.pressed}}),t("phone-key",{staticClass:"el-icon-house",staticStyle:{"border-radius":"0","font-size":"24px",margin:"0"},attrs:{title:"显示桌面",keycode:"home"},on:{pressed:e.pressed}}),t("phone-key",{staticClass:"el-icon-full-screen",staticStyle:{"border-radius":"0","font-size":"24px",margin:"0"},attrs:{title:"近期任务",keycode:"menu"},on:{pressed:e.pressed}})],1)},B=[],T={components:{PhoneKey:j},props:{navBarStyle:{type:Object,default(){return{width:"100%",height:"50px"}}}},methods:{pressed(e){this.$emit("pressed",e)}}},W=T,K=(0,g.Z)(W,H,B,!1,null,null,null),M=K.exports;function N(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){let t=16*Math.random()|0,i="x"==e?t:3&t|8;return i.toString(16)}))}function U(e){let t=void 0!==e.bounds?e.bounds:"[0,0][0,0]",i=t.match(/\[(\d+),(\d+)\]\[(\d+),(\d+)\]/).slice(1).map((e=>parseFloat(e))),s={x:i[0],y:i[1],width:i[2]-i[0],height:i[3]-i[1],centerX:(i[2]-i[0])/2+i[0],centerY:(i[3]-i[1])/2+i[1],level:1e8-(i[2]-i[0])*(i[3]-i[1])};return s}function D(e,t,i,s,n){let r=s/t,o=n/i,l={showX:parseInt(e.x*r),showY:parseInt(e.y*o),showWidth:parseInt(e.width*r),showHeight:parseInt(e.height*o)};return l}function X(e){let t={class:e.localName,uuid:N()};for(let s=0;s<e.attributes.length;s++){let i=e.attributes[s];t[i.name]=i.value}t=Object.assign(t,U(t));let i=[];for(let s=0;s<e.children.length;s++)i.push(X(e.children[s]));return t.nodes=i,t}function Y(e,t,i,s,n){let r=D(e,t,i,s,n);return e=Object.assign(e,r),e.nodes=e.nodes.map((e=>Y(e,t,i,s,n))),e}function Z(e){let t=new Object;e.nodes.forEach((e=>{t=Object.assign(t,Z(e))}));let i=Object.assign({},e);return delete i["nodes"],t[e.uuid]=i,t}function I(e,t){let i=[],s=`<div class="show-element" uuid="${e.uuid}" style="top:${e.showY}px;left:${e.showX}px;width:${e.showWidth}px;height:${e.showHeight}px;z-index:${e.level};"></div>`;return"function"===typeof t&&(s=t(e)),i.push(s),e.nodes.forEach((e=>{i=i.concat(I(e,t))})),i}function A(e,t,i,s,n,r){let o=document.createElement("window");o.innerHTML=e;let l=X(o),a=Y(l,t,i,s,n),d=I(a,r),h=Z(a);return{nodes:l,showDict:h,showElements:d.join("\n")}}var F={transform:A},q={components:{PhoneKeysBar:E,PhoneNavBar:M},data(){return{width:320,height:480,realWidth:0,realHeight:0,imageURL:"",xml:""}},computed:{virtualWidth(){return this.width-40},virtualHeight(){return this.height-90},phoneScreenStyle(){return{width:this.virtualWidth+"px",height:this.virtualHeight+"px","background-image":`url(${this.imageURL})`,"background-size":`${this.virtualWidth}px ${this.virtualHeight}px`}},hierarchy(){return F.transform(this.xml,this.realWidth,this.realHeight,this.virtualWidth,this.virtualHeight)}},methods:{onKeyPressed(e){this.$emit("keypressed",e)},onElementClick(e){this.$emit("elementclick",this.hierarchy.showDict[e.target.getAttribute("uuid")])},onElementDoubleClick(e){this.$emit("elementdoubleclick",this.hierarchy.showDict[e.target.getAttribute("uuid")])}},mounted(){setInterval((()=>{if(void 0!==this.$refs.phoneScreen){let e=this.$refs.phoneScreen.children;for(let t=0;t<e.length;t++){let i=e[t];i.onclick=this.onElementClick,i.ondblclick=this.onElementDoubleClick}}}),1e3)}},G=q,J=(0,g.Z)(G,b,k,!1,null,null,null),Q=J.exports,ee=Q,te={components:{PhoneView:ee,SimpleHeader:x},data(){return{serial:void 0,deviceList:[],data:[],defaultProps:{children:"nodes",label:"class"},defaultExpandedKeys:[0,1],currentNode:{}}},methods:{onRefreshButtonClick(){let e=this;e.$api.devices().then((t=>{e.deviceList=t;let i=!1;"string"===typeof e.serial&&(e.deviceList.includes(e.serial)?i=!0:e.serial=void 0),void 0===e.serial&&e.deviceList.length>0&&(e.serial=e.deviceList[0]),void 0!==e.serial?i?e.$api.dump(e.serial).then((t=>{e.setPhoneView(void 0,void 0,t.width,t.height,t.imageURL,t.xml)})):e.$api.connect(e.serial).then((()=>{e.$api.dump(e.serial).then((t=>{e.setPhoneView(void 0,void 0,t.width,t.height,t.imageURL,t.xml)}))})):e.$message.warning("Device list is null.")}))},setPhoneView(e,t,i,s,n,r){let o=this;o.$refs.phoneView.width=void 0===e?o.$refs.phoneView.width:e,o.$refs.phoneView.height=void 0===t?o.$refs.phoneView.height:t,o.$refs.phoneView.realWidth=void 0===i?o.$refs.phoneView.realWidth:i,o.$refs.phoneView.realHeight=void 0===s?o.$refs.phoneView.realHeight:s,o.$refs.phoneView.imageURL=void 0===n?o.$refs.phoneView.imageURL:n+`?t=${Math.random()}`,o.$refs.phoneView.xml=void 0===r?o.$refs.phoneView.xml:r;let l=o.$refs.phoneView.hierarchy;o.data=[l.nodes]},onPhoneResize(e,t){this.setPhoneView(e,t,void 0,void 0,void 0,void 0)},onPhoneBoxResize(e){this.$refs.phoneView.width>e&&(this.$refs.phoneBox.width=e,this.setPhoneView(e,void 0,void 0,void 0,void 0,void 0))},onPhoneElementDoubleClick(e){let t=this;t.$api.call(t.serial,"click",void 0,[e.centerX,e.centerY]).then((()=>{t.$api.dump(t.serial).then((e=>{t.setPhoneView(void 0,void 0,e.width,e.height,e.imageURL,e.xml)}))}))},onPhoneKeyPressed(e){let t=this;t.$api.call(t.serial,"press",void 0,[e]).then((()=>{t.$api.dump(t.serial).then((e=>{t.setPhoneView(void 0,void 0,e.width,e.height,e.imageURL,e.xml)}))}))},onTreeNodeClick(e){e=Object.assign({},e),delete e["nodes"],delete e["centerX"],delete e["centerY"],delete e["level"],delete e["showX"],delete e["showY"],delete e["showWidth"],delete e["showHeight"],delete e["uuid"],this.currentNode=e}}},ie=te,se=(0,g.Z)(ie,u,p,!1,null,null,null),ne=se.exports;s["default"].config.productionTip=!1,s["default"].use(r()),s["default"].use(l()),s["default"].prototype.$api=c,new s["default"]({render:e=>e(ne)}).$mount("#app")}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,i),r.exports}i.m=e,function(){var e=[];i.O=function(t,s,n,r){if(!s){var o=1/0;for(h=0;h<e.length;h++){s=e[h][0],n=e[h][1],r=e[h][2];for(var l=!0,a=0;a<s.length;a++)(!1&r||o>=r)&&Object.keys(i.O).every((function(e){return i.O[e](s[a])}))?s.splice(a--,1):(l=!1,r<o&&(o=r));if(l){e.splice(h--,1);var d=n();void 0!==d&&(t=d)}}return t}r=r||0;for(var h=e.length;h>0&&e[h-1][2]>r;h--)e[h]=e[h-1];e[h]=[s,n,r]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,r,o=s[0],l=s[1],a=s[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(n in l)i.o(l,n)&&(i.m[n]=l[n]);if(a)var h=a(i)}for(t&&t(s);d<o.length;d++)r=o[d],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(h)},s=self["webpackChunkuiautomatorviewer_ui"]=self["webpackChunkuiautomatorviewer_ui"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(6054)}));s=i.O(s)})();
//# sourceMappingURL=app.e34a7e2b.js.map