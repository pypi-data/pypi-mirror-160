import{d as C,X as D,a6 as k,e as a,a as p,w as i,g as _,b as w,a2 as f,r as g,o as b,j as x,ak as A,af as I,ag as N,ah as P,W as v,q as R}from"./index.476a1f60.js";import{u as U}from"./useRouteParam.186c2d39.js";const q=C({__name:"BlockEdit",async setup(V){let o,u;const l=w(),r=U("blockDocumentId"),e=([o,u]=D(()=>f.getBlockDocument(r.value)),o=await o,u(),o),{blockSchema:m}=e,s=k(e.data),c=k(e.name);function h(){f.updateBlockDocument(e.id,{name:c.value,data:s.value}).then(()=>{v("Block updated successfully","success"),l.push(R.block(r.value))}).catch(d=>{v("Failed to update block","error"),console.error(d)})}function y(){l.back()}return(d,t)=>{const B=g("p-layout-default");return a(e)?(b(),p(B,{key:0,class:"block-edit"},{header:i(()=>[x(a(A),{"block-document":a(e)},null,8,["block-document"])]),default:i(()=>[a(m)?(b(),p(a(I),N({key:0,data:s.value,"onUpdate:data":t[0]||(t[0]=n=>s.value=n),name:c.value,"onUpdate:name":t[1]||(t[1]=n=>c.value=n),"block-schema":a(m)},P({submit:h,cancel:y})),null,16,["data","name","block-schema"])):_("",!0)]),_:1})):_("",!0)}}});export{q as default};
