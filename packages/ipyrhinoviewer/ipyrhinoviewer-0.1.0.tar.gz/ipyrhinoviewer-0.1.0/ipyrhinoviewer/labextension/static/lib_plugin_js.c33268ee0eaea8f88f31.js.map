{"version":3,"file":"lib_plugin_js.c33268ee0eaea8f88f31.js","mappings":";;;;;;;;;AAAa;AACb;AACA;AACA;AACA;AACA,mCAAmC,oCAAoC,gBAAgB;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,mCAAmC,mBAAO,CAAC,iCAAU;AACrD,kBAAkB,mBAAO,CAAC,mCAAW;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;;;;ACjDa;AACb;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,sBAAsB;AAC5C;AACA;AACA;AACA,aAAa,mBAAO,CAAC,uCAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,mBAAmB;AACnB;;;;;;;;;;;ACpBa;AACb;AACA;AACA;AACA;AACA,mCAAmC,oCAAoC,gBAAgB;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,GAAG,kBAAkB;AACtC,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,2BAA2B,mBAAO,CAAC,+DAAO;AAC1C,kBAAkB,mBAAO,CAAC,mCAAW;AACrC,wBAAwB,mBAAO,CAAC,8GAA2C;AAC3E,qBAAqB,mBAAO,CAAC,oGAAsC;AACnE;AACA,mBAAO,CAAC,2CAAmB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC,gDAAgD;AAChD;AACA;AACA,YAAY,4BAA4B;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;;;;;;;;;AChIA;AACA,kCAAkC,mBAAO,CAAC,qGAAgD;AAC1F;AACA;AACA,0CAA0C,oCAAoC,qBAAqB,GAAG;AACtG;AACA;;;;;;;;;;;ACNA,UAAU,mBAAO,CAAC,oJAAwE;AAC1F,0BAA0B,mBAAO,CAAC,qHAAuD;;AAEzF;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;;AAIA","sources":["webpack://ipyrhinoviewer/./lib/plugin.js","webpack://ipyrhinoviewer/./lib/version.js","webpack://ipyrhinoviewer/./lib/widget.js","webpack://ipyrhinoviewer/./css/widget.css","webpack://ipyrhinoviewer/./css/widget.css?a195"],"sourcesContent":["\"use strict\";\n// Copyright (c) Florian Jaeger\n// Distributed under the terms of the Modified BSD License.\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst base_1 = require(\"@jupyter-widgets/base\");\nconst widgetExports = __importStar(require(\"./widget\"));\nconst version_1 = require(\"./version\");\nconst EXTENSION_ID = 'ipyrhinoviewer:plugin';\n/**\n * The example plugin.\n */\nconst examplePlugin = {\n    id: EXTENSION_ID,\n    requires: [base_1.IJupyterWidgetRegistry],\n    activate: activateWidgetExtension,\n    autoStart: true,\n};\n// the \"as unknown as ...\" typecast above is solely to support JupyterLab 1\n// and 2 in the same codebase and should be removed when we migrate to Lumino.\nexports.default = examplePlugin;\n/**\n * Activate the widget extension.\n */\nfunction activateWidgetExtension(app, registry) {\n    registry.registerWidget({\n        name: version_1.MODULE_NAME,\n        version: version_1.MODULE_VERSION,\n        exports: widgetExports,\n    });\n}\n//# sourceMappingURL=plugin.js.map","\"use strict\";\n// Copyright (c) Florian Jaeger\n// Distributed under the terms of the Modified BSD License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MODULE_NAME = exports.MODULE_VERSION = void 0;\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst data = require('../package.json');\n/**\n * The _model_module_version/_view_module_version this package implements.\n *\n * The html widget manager assumes that this is the same as the npm package\n * version number.\n */\nexports.MODULE_VERSION = data.version;\n/*\n * The current package name.\n */\nexports.MODULE_NAME = data.name;\n//# sourceMappingURL=version.js.map","\"use strict\";\n// Copyright (c) Florian Jaeger\n// Distributed under the terms of the Modified BSD License.\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RhinoView = exports.RhinoModel = void 0;\nconst base_1 = require(\"@jupyter-widgets/base\");\nconst THREE = __importStar(require(\"three\"));\nconst version_1 = require(\"./version\");\nconst OrbitControls_1 = require(\"three/examples/jsm/controls/OrbitControls\");\nconst _3DMLoader_1 = require(\"three/examples/jsm/loaders/3DMLoader\");\n// Import the CSS\nrequire(\"../css/widget.css\");\nclass RhinoModel extends base_1.DOMWidgetModel {\n    defaults() {\n        return {\n            ...super.defaults(),\n            _model_name: RhinoModel.model_name,\n            _model_module: RhinoModel.model_module,\n            _model_module_version: RhinoModel.model_module_version,\n            _view_name: RhinoModel.view_name,\n            _view_module: RhinoModel.view_module,\n            _view_module_version: RhinoModel.view_module_version,\n            value: '',\n        };\n    }\n}\nexports.RhinoModel = RhinoModel;\nRhinoModel.serializers = {\n    ...base_1.DOMWidgetModel.serializers,\n};\nRhinoModel.model_name = 'RhinoModel';\nRhinoModel.model_module = version_1.MODULE_NAME;\nRhinoModel.model_module_version = version_1.MODULE_VERSION;\nRhinoModel.view_name = 'RhinoView'; // Set to null if no view\nRhinoModel.view_module = version_1.MODULE_NAME; // Set to null if no view\nRhinoModel.view_module_version = version_1.MODULE_VERSION;\nfunction load3dmModel(scene, filePath, options) {\n    const { receiveShadow, castShadow } = options;\n    return new Promise((resolve, reject) => {\n        const loader = new _3DMLoader_1.Rhino3dmLoader();\n        loader.setLibraryPath('https://cdn.jsdelivr.net/npm/rhino3dm@0.15.0-beta/');\n        loader.load(filePath, (data) => {\n            const obj = data;\n            obj.position.y = 0;\n            obj.position.x = 0;\n            obj.receiveShadow = receiveShadow;\n            obj.castShadow = castShadow;\n            scene.add(obj);\n            obj.traverse((child) => {\n                if (child.isObject3D) {\n                    child.castShadow = castShadow;\n                    child.receiveShadow = receiveShadow;\n                }\n            });\n            resolve(obj);\n        }, undefined, (error) => {\n            console.log(error);\n            reject(error);\n        });\n    });\n}\nclass RhinoView extends base_1.DOMWidgetView {\n    constructor() {\n        super(...arguments);\n        this.path = this.model.get('value');\n    }\n    render() {\n        const width = 1000;\n        const height = 700;\n        const scene = new THREE.Scene();\n        const camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);\n        const renderer = new THREE.WebGLRenderer();\n        renderer.setSize(width, height);\n        const ambientLight = new THREE.AmbientLight(0xcccccc, 2);\n        scene.add(ambientLight);\n        const controls = new OrbitControls_1.OrbitControls(camera, renderer.domElement);\n        const onContextMenu = (event) => {\n            event.stopPropagation();\n        };\n        this.el.addEventListener('contextmenu', onContextMenu);\n        load3dmModel(scene, '/tree/' + this.path, {\n            receiveShadow: true,\n            castShadow: false,\n        })\n            .then(() => {\n            this.value_changed();\n            this.model.on('change:value', this.value_changed, this);\n            animate();\n        })\n            .catch((reason) => {\n            const error = document.createElement('p');\n            error.textContent = reason;\n            this.el.appendChild(error);\n            return;\n        });\n        this.el.appendChild(renderer.domElement);\n        camera.position.z = 5;\n        function animate() {\n            requestAnimationFrame(animate);\n            controls.update();\n            renderer.render(scene, camera);\n        }\n        animate();\n    }\n    value_changed() {\n        this.path = this.model.get('value');\n    }\n}\nexports.RhinoView = RhinoView;\n//# sourceMappingURL=widget.js.map","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".custom-widget {\\n  background-color: lightseagreen;\\n  padding: 0px 2px;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./widget.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};"],"names":[],"sourceRoot":""}